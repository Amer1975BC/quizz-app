<!doctype html>
<html lang="nl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Quiz App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="/static/styles.css?v=20251114d">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary mb-3">
      <div class="container">
        <a class="navbar-brand dancing-text" href="#">
          <span>Q</span><span>u</span><span>i</span><span>z</span> 
          <span>A</span><span>p</span><span>p</span>
        </a>
      </div>
    </nav>
    <main class="container" id="app">
      <div class="container">
        <div id="quiz-selector" style="display:block;">
          <h2 class="question">Kies je quiz:</h2>
          <button class="answers button quiz-select-btn" onclick="startQuiz('general')">
            ğŸ² Algemene Quiz (100 vragen)
          </button>
          <button class="answers button quiz-select-btn" onclick="startQuiz('pspo1')">
            ğŸ¯ PSPO1 Scrum Product Owner (15 vragen)
          </button>
        </div>
        <div id="quiz-content" style="display:none;"></div>
        <div class="score" id="score" style="display:none;">Score: 0</div>
        <button class="next-btn" id="next-btn" style="display:none">Volgende vraag</button>
        <button class="next-btn" id="back-btn" style="display:none" onclick="showQuizSelector()">ğŸ  Terug naar overzicht</button>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Enhanced Safari detection and debugging
      var isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/Chromium/.test(navigator.userAgent);
      var isOldSafari = /Version\/([0-9]+)/.test(navigator.userAgent) && parseInt(RegExp.$1) < 14;
      
      console.log('Browser detection:', {
        userAgent: navigator.userAgent,
        isSafari: isSafari,
        isOldSafari: isOldSafari,
        supportsModules: 'type' in document.createElement('script')
      });
      
      if (isSafari || isOldSafari || !window.fetch) {
        // Load Safari-compatible scripts for Safari or older browsers
        console.log('Loading Safari-compatible scripts');
        var apiScript = document.createElement('script');
        apiScript.src = '/static/api-safari.js?v=20251114';
        apiScript.onerror = function() { console.error('Failed to load Safari API script'); };
        document.head.appendChild(apiScript);
        
        apiScript.onload = function() {
          console.log('Safari API loaded, loading app script');
          var appScript = document.createElement('script');
          appScript.src = '/static/app.js?v=20251114';
          appScript.onerror = function() { console.error('Failed to load Safari app script'); };
          document.head.appendChild(appScript);
        };
      } else {
        // Load modern ES6 modules for other browsers
        console.log('Loading modern ES6 modules');
        var moduleScript = document.createElement('script');
        moduleScript.type = 'module';
        moduleScript.src = '/static/app.js?v=20251109L';
        moduleScript.onerror = function() { console.error('Failed to load ES6 module'); };
        document.head.appendChild(moduleScript);
      }
    </script>
    <script src="/static/admin.js?v=20251109L"></script>
  </body>
  </html>
